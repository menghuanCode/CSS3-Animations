(function(){window.wechatAuthorization=function(wx_oauth){if(window.cmb_auth&&window.cmb_auth['cmb_auth']){if(cmb_auth['cmb_auth']==''){return;}
if(!window.epub360_userinfo.openid){var tp='tplogin://';if(window.location.protocol=='https:')tp='tplogins://';var url=tp+window.location.host+cmb_auth['cmb_redirect_uri']+'?param='+context_url.split('/')[4]+'&corpno='+cmb_auth['cmb_corpno']+'&auth='+cmb_auth['cmb_auth'];window.location.href=url;return;}}
if(window.location.search.indexOf('notweixin=1')===-1){if((wx_oauth.auth_mode===1&&!window.epub360_userinfo.openid)||(wx_oauth.auth_mode===2&&!window.epub360_userinfo.nickname)){if(window.wx_config&&window.redirect_uri){var url=wx_oauth.auth_url+"?appid="+window.wx_config.appId+"&redirect_uri="+window.redirect_uri+"&response_type="+wx_oauth.auth_params.response_type+"&scope="+wx_oauth.auth_params.scope+"&state="+wx_oauth.auth_params.state+"#wechat_redirectRI";window.location.href=url}}}}})()